<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="resource.MeetingMapper">
	<select id="selectMeeting" resultType="vo.MeetingVO">
		select id, name, title,
		to_char(meetingdate,'yyyy"년"mm"월"dd"일" HH24"시"mi"분"') from meeting order by id
	</select>
	<select id="selectMeeting1" parameterType="_int"
		resultType="vo.MeetingVO">
		select from meeting where id = #{id}
	</select>
	<select id="searchMeeting" parameterType="string"
		resultType="vo.MeetingVO">
		select id, name, title, to_char(meetingdate,'yyyy"년"mm"월"dd"일" HH24"시"mi"분"') from meeting
		where title like '%'||#{keyword}||'%'
	</select>
	<delete id="deleteMeeting" parameterType="_int">
		delete from meeting where id = #{id}
	</delete>
	<insert id="insertMeeting" parameterType="vo.MeetingVO">
		<selectKey resultType="int" keyProperty="id" order="BEFORE">
			select
			meeting_seq.nextval from dual
		</selectKey>
		insert into meeting (id, name, title, meetingdate) values (#{id},
		#{name}, #{title}, to_date(#{meetingDate}, 'yyyy-mm-dd"T"hh24:mi'))
	</insert>
	<update id="updateMeeting" parameterType="vo.MeetingVO">
		update meeting set
		name= #{name}, title=#{title},
		meetingdate=to_date(#{meetingDate}, 'yyyy-mm-dd"T"hh24:mi')
		where id=#{id}
	</update>
</mapper>